# Важное про condition variable
* `wait()` — это оптимизация. Если её заменить на "отпустили мьютекс, подождали, взяли мьютекс обратно", то всё ещё должно работать.
* Следствие: condition variable никогда не используются без какого-то отслеживаемого условия или мьютекса.

# Мораль
* Никогда не модифицируйте ничего без мьютекса!
  Даже если сейчас не стреляет, ловить потом будет сложно.
* Не надо брать мьютекс надолго.
* Обычно проще писать не через condvar'ы, а через future или каналы (потокобезопасная очередь сообщений).
  * Но ещё лучше вообще писать без потоков или хотя бы не синхронизировать ничего руками.
